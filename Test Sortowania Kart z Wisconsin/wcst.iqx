**************************************************************************************************************
**************************************************************************************************************
	EDITABLE PARAMETERS: change editable parameters here
**************************************************************************************************************
**************************************************************************************************************

<parameters>
/ cstotaltrials = 128 
/ cstotalblocks = 2
/ correctstreakthreshold = 10
/setmaintainthreshold = 5
/showdeckinfo = false

/picsize =30%
</parameters>

**************************************************************************************************************
**************************************************************************************************************
	EDITABLE STIMULI: change editable stimuli here
**************************************************************************************************************
**************************************************************************************************************

************************
Deck of Cards
***********************

<item playcards>
/1 = "RedTriangle1.gif"
/2 = "RedTriangle2.gif"
/3 = "RedTriangle3.gif"
/4 = "RedTriangle4.gif"
/5 = "GreenTriangle1.gif"
/6 = "GreenTriangle2.gif"
/7 = "GreenTriangle3.gif"
/8 = "GreenTriangle4.gif"
/9 = "YellowTriangle1.gif"
/10 = "YellowTriangle2.gif"
/11 = "YellowTriangle3.gif"
/12 = "YellowTriangle4.gif"
/13 = "BlueTriangle1.gif"
/14 = "BlueTriangle2.gif"
/15 = "BlueTriangle3.gif"
/16 = "BlueTriangle4.gif"
/17 = "RedStar1.gif"
/18 = "RedStar2.gif"
/19 = "RedStar3.gif"
/20 = "RedStar4.gif"
/21 = "GreenStar1.gif"
/22 = "GreenStar2.gif"
/23 = "GreenStar3.gif"
/24 = "GreenStar4.gif"
/25 = "YellowStar1.gif"
/26 = "YellowStar2.gif"
/27 = "YellowStar3.gif"
/28 = "YellowStar4.gif"
/29 = "BlueStar1.gif"
/30 = "BlueStar2.gif"
/31 = "BlueStar3.gif"
/32 = "BlueStar4.gif"
/33 = "RedCross1.gif"
/34 = "RedCross2.gif"
/35 = "RedCross3.gif"
/36 = "RedCross4.gif"
/37 = "GreenCross1.gif"
/38 = "GreenCross2.gif"
/39 = "GreenCross3.gif"
/40 = "GreenCross4.gif"
/41 = "YellowCross1.gif"
/42 = "YellowCross2.gif"
/43 = "YellowCross3.gif"
/44 = "YellowCross4.gif"
/45 = "BlueCross1.gif"
/46 = "BlueCross2.gif"
/47 = "BlueCross3.gif"
/48 = "BlueCross4.gif"
/49 = "RedCircle1.gif"
/50 = "RedCircle2.gif"
/51 = "RedCircle3.gif"
/52= "RedCircle4.gif"
/53= "GreenCircle1.gif"
/54= "GreenCircle2.gif"
/55= "GreenCircle3.gif"
/56 = "GreenCircle4.gif"
/57 = "YellowCircle1.gif"
/58 = "YellowCircle2.gif"
/59 = "YellowCircle3.gif"
/60 = "YellowCircle4.gif"
/61= "BlueCircle1.gif"
/62 = "BlueCircle2.gif"
/63 = "BlueCircle3.gif"
/64 = "BlueCircle4.gif"
</item>

<item źle>
/1 ="źle"			  		
</item>

<item dobrze>
/1 = "dobrze"
</item>

<text deck>
/ items = ("Deck: <%values.numberofdecks%> of 2; Card: <%values.cardsfromadeck%> of 64")
/ position = (50%, 10%)
/ fontstyle = ("Arial", 2.67%, false, false, false, false, 5, 0)
/ txcolor = black
</text>

**************************************************************************************************************
**************************************************************************************************************
	EDITABLE INSTRUCTIONS: change instructions here
**************************************************************************************************************
**************************************************************************************************************
<instruct> 
/ fontstyle = ("Arial", 2%, false, false, false, false, 5, 0)
/ screencolor = white
/ txcolor = black
/ wait = 500
/ inputdevice = mouse
</instruct>

<htmlpage welcome> 
/ file = "wprowadzenie.htm"
</htmlpage>

<htmlpage page1> 
/ file = "new.htm"
</htmlpage>


<htmlpage end> 
/ file = "end.html"
</htmlpage>

**************************************************************************************************************
								!!!REMAINING CODE: Customize after careful consideration only!!!
**************************************************************************************************************

**************************************************************************************************************
**************************************************************************************************************
	DEFAULT SCREEN SETTING
**************************************************************************************************************
**************************************************************************************************************
script requires Inquisit 5.0.0.0 or higher

<defaults>
/ canvasaspectratio = (4,3)
/ screencolor = white
/ fontstyle = ("Arial", 2%, false, false, false, false, 5, 0)
/ txbgcolor = white
/ txcolor = black
/ inputdevice = keyboard
/minimumversion = "5.0.0.0"
</defaults>

**************************************************************************************************************
**************************************************************************************************************
	DATA
**************************************************************************************************************
**************************************************************************************************************												
NOTE: various summary scores are not updated on a trial- but rather on a block basis 
(e.g. values.completedcategories).
The last line in the data file provides the final data point for these measures.

************************
raw data
************************

<data> 
/ columns = (build, computer.platform, date, time, subject, group, blockcode, blocknum, trialcode, trialnum, 
					values.colortrialcount, values.formtrialcount, values.numbertrialcount, expressions.totaltrials,
					values.category, stimulusitem, stimulusitem, stimulusitem, stimulusitem, stimulusitem,
					response, latency, values.ResponseCategory, correct, values.correctstreak, 
					values.PerseverativeResponse, values.Sum_PerseverativeResponses, expressions.percent_perserverativeresponses,
					values.totalcorrect, values.totalerror, values.sum_perseverativeerror,
					values.completedcategories, values.Sum_FailureMaintainSet, values.trialscompletefirstcategory,
					values.errorsum_block, trial.selectcard.count,
					values.percenterror_C1, values.percenterror_F1, values.percenterror_N1,
					values.percenterror_C2, values.percenterror_F2, values.percenterror_N2,
					expressions.Diff_C1F1, expressions.Diff_F1N1, expressions.Diff_N1C2,
					expressions.Diff_C2F2, expressions.Diff_F2N2)
					
/ separatefiles = true
</data>

************************
summary data
************************

<summarydata>
/ separatefiles = true
/columns = (script.startdate, script.starttime, script.subjectid, script.groupid, script.elapsedtime, computer.platform, values.completed, 
					parameters.cstotaltrials, parameters.cstotalblocks, parameters.correctstreakthreshold, parameters.setmaintainthreshold, parameters.showdeckinfo,
					values.colortrialcount, values.formtrialcount, values.numbertrialcount, expressions.totaltrials,
					values.totalcorrect, values.totalerror, values.sum_perseverativeerror, expressions.percent_perservativeerror,
					values.Sum_PerseverativeResponses, expressions.Percent_PerserverativeResponses,
					values.completedcategories, values.Sum_FailureMaintainSet, values.trialscompletefirstcategory,
					values.percenterror_C1, values.percenterror_F1, values.percenterror_N1,
					values.percenterror_C2, values.percenterror_F2, values.percenterror_N2,
					expressions.Diff_C1F1, expressions.Diff_F1N1, expressions.Diff_N1C2,
					expressions.Diff_C2F2, expressions.Diff_F2N2)
</summarydata>

**************************************************************************************************************
**************************************************************************************************************
	VALUES: automatically updated at runtime
**************************************************************************************************************
**************************************************************************************************************

completed:														0 = script was not completed; 1 = script was completed (all conditions run)
colorblockcount/formblockcount/numberblockcount:				counts the number of color/form/number  blocks run 
OldRuleWindow:													1 if a new rule is activated; it's deactived (0) once a participant does not respond according to the old rule anymore
correctstreak:													counts consecutive correct responses (if an error is made, it's reset back to 0)
colortrialcount/formtrialcount/numbertrialcount:				sum up the trials run in the color/form/number categories	
card:															determines which card to present (randomly selected from list.selectcard)
category :														1 = color; 2 = form; 3 = number
numberofdecks:													counts the number of decks used (1-2)			
cardsfromadeck:													counts the number of cards from a deck (1-64)
errorsum_block:													counts the errors in a block (reset after each block)
percenterror_C1/.../percenterror_N2:							percent errors in the first color category ....percent errors in the second number category (etc.)
totalcorrect:													sums up all the correct responses across the task
totalerror:														ums up all the incorrect responses across the task
PerseverativeResponse:											1 = response is still in compliance with the old rule after a rule switch (and no response has been made yet that violates the old rule)
																0 = any other response
Sum_PerseverativeResponses:										Keeps a total of the number of perseverative responses made throughout the test
Sum_PerseverativeError:											sums up all error trials with values.perseverativeresponse = 1
ResponseCategory:												=> records features that the selected card (response) and the test card have in common
																						CFN (color, form, number); CF (color; form); CN (color, number); FN (form, number)
																						C (color); F (form); N (number); O (other)
Sum_FailureMaintainSet											keeps a total of the number of times a participants selects an incorrect card after having maintained a correct streak of 5 or higher (default)
trialscompletefirstcategory										keeps track of how many trials a participant needed to complete the first category
completedcategories												number of categories (color, form, number) successfully completed (min = 0, max = 6)

<values>
/ completed = 0
/ colorblockcount = 0
/ formblockcount = 0
/ numberblockcount = 0
/OldRuleWindow = 0
/correctstreak = 0
/colortrialcount = 0
/formtrialcount = 0
/numbertrialcount = 0
/card = 0
/category = 0
/numberofdecks = 1
/cardsfromadeck = 0
/errorsum_block = 0
/percenterror_C1 = 0
/percenterror_C2 = 0
/percenterror_F1 = 0
/percenterror_F2 = 0
/percenterror_N1 = 0
/percenterror_N2 = 0
/totalcorrect = 0
/totalerror = 0
/PerseverativeResponse = 0
/Sum_PerseverativeResponses = 0
/Sum_PerseverativeError = 0
/ResponseCategory = ""
/Sum_FailureMaintainSet = 0
/trialscompletefirstcategory = 0
/completedcategories = 0
</values>

**************************************************************************************************************
**************************************************************************************************************
	EXPRESSIONS
**************************************************************************************************************
*************************************************************************************************************
Percent_PerserverativeResponses : 		percentage of PerserverativeResponses of all trials
Percent_PerservativeError:				percentage of Perserverative Errors (relative to all errors made)
Diff_C1F1 etc.:							difference scores of percent errors in adjacent categories
												(e.g. Diff_C1F1 = percenterrors in first color category - percenterrors in first form category)
												NOTE: these scores are NOT updated on a trial basis
totaltrials:								counts the total trials run

<expressions>
/ toomanytrials = values.colortrialcount + values.formtrialcount + values.numbertrialcount == parameters.cstotaltrials 
/ toomanyblocks = (block.color.count == parameters.cstotalblocks) && (block.form.count == parameters.cstotalblocks) && (block.number.count == parameters.cstotalblocks)
/Percent_PerserverativeResponses = 100 * (values.Sum_PerseverativeResponses / (values.colortrialcount + values.formtrialcount + values.numbertrialcount))
/Percent_PerservativeError = 100 * (values.sum_perseverativeerror/values.totalerror)
/Diff_C1F1 = values.percenterror_C1 - values.percenterror_F1
/Diff_F1N1 = values.percenterror_F1 - values.percenterror_N1
/Diff_N1C2 = values.percenterror_N1 - values.percenterror_C2
/Diff_C2F2 = values.percenterror_C2 - values.percenterror_F2
/Diff_F2N2 = values.percenterror_F2 - values.percenterror_N2
/totaltrials = values.colortrialcount + values.formtrialcount + values.numbertrialcount 
</expressions>

************************************
general instruction expressions
************************************
/buttoninstruct: adjusts the instruction text depending on device used to run script

<expressions>
/buttoninstruct1 = if (computer.touch && !computer.haskeyboard) {"Touch";} else {"Click on";}
/buttoninstruct2 = if (computer.touch && !computer.haskeyboard) {"touch";} else {"click on";}
/buttoninstruct3 = if (computer.touch && !computer.haskeyboard) {"Touching";} else {"Clicking on";}
/buttoninstruct4 = if (computer.touch && !computer.haskeyboard) {"touching";} else {"clicking on";}
</expressions>

**************************************************************************************************************
**************************************************************************************************************
	STIMULI
**************************************************************************************************************
**************************************************************************************************************

***********************
Feedback
***********************
<text wrong>
/ items = źle
/ color = red
/ fontstyle = ("Arial", 5%, true, false, false, false, 5, 0)
/ position =(50,50)
</text>

<text right>
/ items = dobrze
/ color = (0, 255, 64)
/ fontstyle = ("Arial", 5%, true, false, false, false, 5, 0)
/ position =(50,50)
</text>

<picture playcard>
/ items = playcards
/ select = values.card
/ position = (50%,30%)
/ size = (parameters.picsize, parameters.picsize)
</picture>

**********************
Reponse Stimuli 
**********************
<picture RedTriangle1>
/ items = ("RedTriangle1_test.gif")
/ position = (20%,65%)
/ size = (parameters.picsize, parameters.picsize)
</picture>

<picture GreenStar2>
/ items = ("GreenStar2_test.gif")
/ position = (40%,65%)
/ size = (parameters.picsize, parameters.picsize)
</picture>

<picture YellowCross3>
/ items = ("YellowCross3_test.gif")
/ position = (60%,65%)
/ size = (parameters.picsize, parameters.picsize)
</picture>

<picture BlueCircle4>
/ items = ("BlueCircle4_test.gif")
/ position = (80%,65%)
/ size = (parameters.picsize, parameters.picsize)
</picture>

**************************************************************************************************************
**************************************************************************************************************
															LIST
**************************************************************************************************************
**************************************************************************************************************
Note: selects a random number between 1-64 without replacement (is reset after 64 trials in 
trial.selectcard). Each number references one of the 64 cards.

<list selectcard>
/items = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10,
11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
21, 22, 23, 24, 25, 26, 27, 28, 29, 30,
31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
41, 42, 43, 44, 45, 46, 47, 48, 49, 50,
51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 
61, 62, 63, 64)
/ replace = false
</list>
**************************************************************************************************************
**************************************************************************************************************
	TRIALS
**************************************************************************************************************
**************************************************************************************************************

Overview:
trial.selectcard -> first of 64 card trials -> trial.selectcard -> second of 64 card trials ->....

(until stopconditions for the current block has been reached)


****************************************************
Utility trial: 
*selects the card from the deck of cards via list.selectcard
and calls appropriate card trial
*resets the list after 64 cards to mimic deck#2
*****************************************************

<trial selectcard>
/ recorddata = false
/ ontrialbegin = [values.PerseverativeResponse = 0]
/ ontrialbegin = [values.cardsfromadeck += 1]
/ ontrialbegin = [if ((values.colortrialcount + values.formtrialcount + values.numbertrialcount) == 64)
								{list.selectcard.reset(); 
								values.numberofdecks += 1;
								values.cardsfromadeck = 1}]
/ ontrialbegin = [values.card = list.selectcard.nextvalue]
/ timeout = 0
/ branch = [if (values.card == 1) trial.RedTriangle1]
/ branch = [if (values.card == 2) trial.RedTriangle2]
/ branch = [if (values.card == 3) trial.RedTriangle3]
/ branch = [if (values.card == 4) trial.RedTriangle4]
/ branch = [if (values.card == 5) trial.GreenTriangle1]
/ branch = [if (values.card == 6) trial.GreenTriangle2]
/ branch = [if (values.card == 7) trial.GreenTriangle3]
/ branch = [if (values.card == 8) trial.GreenTriangle4]
/ branch = [if (values.card == 9) trial.YellowTriangle1]
/ branch = [if (values.card == 10) trial.YellowTriangle2]
/ branch = [if (values.card == 11) trial.YellowTriangle3]
/ branch = [if (values.card == 12) trial.YellowTriangle4]
/ branch = [if (values.card == 13) trial.BlueTriangle1]
/ branch = [if (values.card == 14) trial.BlueTriangle2]
/ branch = [if (values.card == 15) trial.BlueTriangle3]
/ branch = [if (values.card == 16) trial.BlueTriangle4]

/ branch = [if (values.card == 17) trial.RedStar1]
/ branch = [if (values.card == 18) trial.RedStar2]
/ branch = [if (values.card == 19) trial.RedStar3]
/ branch = [if (values.card == 20) trial.RedStar4]
/ branch = [if (values.card == 21) trial.GreenStar1]
/ branch = [if (values.card == 22) trial.GreenStar2]
/ branch = [if (values.card == 23) trial.GreenStar3]
/ branch = [if (values.card == 24) trial.GreenStar4]
/ branch = [if (values.card == 25) trial.YellowStar1]
/ branch = [if (values.card == 26) trial.YellowStar2]
/ branch = [if (values.card == 27) trial.YellowStar3]
/ branch = [if (values.card == 28) trial.YellowStar4]
/ branch = [if (values.card == 29) trial.BlueStar1]
/ branch = [if (values.card == 30) trial.BlueStar2]
/ branch = [if (values.card == 31) trial.BlueStar3]
/ branch = [if (values.card == 32) trial.BlueStar4]

/ branch = [if (values.card == 33) trial.RedCross1]
/ branch = [if (values.card == 34) trial.RedCross2]
/ branch = [if (values.card == 35) trial.RedCross3]
/ branch = [if (values.card == 36) trial.RedCross4]
/ branch = [if (values.card == 37) trial.GreenCross1]
/ branch = [if (values.card == 38) trial.GreenCross2]
/ branch = [if (values.card == 39) trial.GreenCross3]
/ branch = [if (values.card == 40) trial.GreenCross4]
/ branch = [if (values.card == 41) trial.YellowCross1]
/ branch = [if (values.card == 42) trial.YellowCross2]
/ branch = [if (values.card == 43) trial.YellowCross3]
/ branch = [if (values.card == 44) trial.YellowCross4]
/ branch = [if (values.card == 45) trial.BlueCross1]
/ branch = [if (values.card == 46) trial.BlueCross2]
/ branch = [if (values.card == 47) trial.BlueCross3]
/ branch = [if (values.card == 48) trial.BlueCross4]

/ branch = [if (values.card == 49) trial.RedCircle1]
/ branch = [if (values.card == 50) trial.RedCircle2]
/ branch = [if (values.card == 51) trial.RedCircle3]
/ branch = [if (values.card == 52) trial.RedCircle4]
/ branch = [if (values.card == 53) trial.GreenCircle1]
/ branch = [if (values.card == 54) trial.GreenCircle2]
/ branch = [if (values.card == 55) trial.GreenCircle3]
/ branch = [if (values.card == 56) trial.GreenCircle4]
/ branch = [if (values.card == 57) trial.YellowCircle1]
/ branch = [if (values.card == 58) trial.YellowCircle2]
/ branch = [if (values.card == 59) trial.YellowCircle3]
/ branch = [if (values.card == 60) trial.YellowCircle4]
/ branch = [if (values.card == 61) trial.BlueCircle1]
/ branch = [if (values.card == 62) trial.BlueCircle2]
/ branch = [if (values.card == 63) trial.BlueCircle3]
/ branch = [if (values.card == 64) trial.BlueCircle4]
</trial>

************************************************************
Main Card Trials
************************************************************
TRIANGLES:

<trial RedTriangle1>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.RedTriangle1.response == "RedTriangle1") ||
								(values.category == 2 && trial.RedTriangle1.response == "RedTriangle1") ||
								(values.category == 3 && trial.RedTriangle1.response == "RedTriangle1") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold && trial.RedTriangle1.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.RedTriangle1.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedTriangle1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedTriangle1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedTriangle1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.RedTriangle1.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedTriangle1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedTriangle1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedTriangle1.response != "RedTriangle1")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.RedTriangle1.response == "RedTriangle1")  values.ResponseCategory = "CFN" 
						else values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>

<trial RedTriangle2>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.RedTriangle2.response == "RedTriangle1") ||
								(values.category == 2 && trial.RedTriangle2.response == "RedTriangle1") ||
								(values.category == 3 && trial.RedTriangle2.response == "GreenStar2") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.RedTriangle2.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.RedTriangle2.correct) 								
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedTriangle2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedTriangle2.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedTriangle2.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.RedTriangle2.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedTriangle2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedTriangle2.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedTriangle2.response != "RedTriangle1")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.RedTriangle2.response == "RedTriangle1")  values.ResponseCategory = "CF" ]
/ ontrialend = [if (trial.RedTriangle2.response == "Greenstar2")  values.ResponseCategory = "N" ]
/ ontrialend = [if (trial.RedTriangle2.response != "RedTriangle1" && trial.RedTriangle2.response != "Greenstar2") 
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>

<trial RedTriangle3>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.RedTriangle3.response == "RedTriangle1") ||
								(values.category == 2 && trial.RedTriangle3.response == "RedTriangle1") ||
								(values.category == 3 && trial.RedTriangle3.response == "YellowCross3") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.RedTriangle3.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.RedTriangle3.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedTriangle3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedTriangle3.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedTriangle3.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.RedTriangle3.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedTriangle3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedTriangle3.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedTriangle3.response != "RedTriangle1")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.RedTriangle3.response == "RedTriangle1")  values.ResponseCategory = "CF" ]
/ ontrialend = [if (trial.RedTriangle3.response == "YellowCross3")  values.ResponseCategory = "N" ]
/ ontrialend = [if (trial.RedTriangle3.response != "RedTriangle1" && trial.RedTriangle3.response != "YellowCross3") 
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>



<trial RedTriangle4>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.RedTriangle4.response == "RedTriangle1") ||
								(values.category == 2 && trial.RedTriangle4.response == "RedTriangle1") ||
								(values.category == 3 && trial.RedTriangle4.response == "BlueCircle4") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.RedTriangle4.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.RedTriangle4.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedTriangle4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedTriangle4.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedTriangle4.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.RedTriangle4.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedTriangle4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedTriangle4.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedTriangle4.response != "RedTriangle1")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.RedTriangle4.response == "RedTriangle1")  values.ResponseCategory = "CF" ]
/ ontrialend = [if (trial.RedTriangle4.response == "YellowCross3")  values.ResponseCategory = "N" ]
/ ontrialend = [if (trial.RedTriangle4.response != "RedTriangle1" && trial.RedTriangle4.response != "BlueCircle4") 
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>



<trial GreenTriangle1>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.GreenTriangle1.response == "GreenStar2") ||
								(values.category == 2 && trial.GreenTriangle1.response == "RedTriangle1") ||
								(values.category == 3 && trial.GreenTriangle1.response == "RedTriangle1") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.GreenTriangle1.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.GreenTriangle1.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenTriangle1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenTriangle1.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenTriangle1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.GreenTriangle1.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenTriangle1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenTriangle1.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenTriangle1.response != "RedTriangle1")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.GreenTriangle1.response == "RedTriangle1")  values.ResponseCategory = "FN" ]
/ ontrialend = [if (trial.GreenTriangle1.response == "GreenStar2")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.GreenTriangle1.response != "RedTriangle1" && trial.GreenTriangle1.response != "GreenStar2") 
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>



<trial GreenTriangle2>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.GreenTriangle2.response == "GreenStar2") ||
								(values.category == 2 && trial.GreenTriangle2.response == "RedTriangle1") ||
								(values.category == 3 && trial.GreenTriangle2.response == "GreenStar2") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.GreenTriangle2.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.GreenTriangle2.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenTriangle2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenTriangle2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenTriangle2.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.GreenTriangle2.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenTriangle2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenTriangle2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenTriangle2.response != "RedTriangle1")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.GreenTriangle2.response == "GreenStar2")  values.ResponseCategory = "CN" ]
/ ontrialend = [if (trial.GreenTriangle2.response == "RedTriangle1")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.GreenTriangle2.response != "RedTriangle1" && trial.GreenTriangle2.response != "GreenStar2") 
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***No ambiguity:1***
<trial GreenTriangle3>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.GreenTriangle3.response == "GreenStar2") ||
								(values.category == 2 && trial.GreenTriangle3.response == "RedTriangle1") ||
								(values.category == 3 && trial.GreenTriangle3.response == "YellowCross3") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.GreenTriangle3.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.GreenTriangle3.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenTriangle3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenTriangle3.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenTriangle3.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.GreenTriangle3.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenTriangle3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenTriangle3.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenTriangle3.response != "RedTriangle1")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.GreenTriangle3.response == "GreenStar2")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.GreenTriangle3.response == "RedTriangle1")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.GreenTriangle3.response == "YellowCross3")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.GreenTriangle3.response != "RedTriangle1" && trial.GreenTriangle3.response != "GreenStar2" &&
						trial.GreenTriangle3.response != "YellowCross3") 
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***No ambiguity:2***
<trial GreenTriangle4>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.GreenTriangle4.response == "GreenStar2") ||
								(values.category == 2 && trial.GreenTriangle4.response == "RedTriangle1") ||
								(values.category == 3 && trial.GreenTriangle4.response == "BlueCircle4") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.GreenTriangle4.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.GreenTriangle4.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenTriangle4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenTriangle4.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenTriangle4.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.GreenTriangle4.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenTriangle4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenTriangle4.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenTriangle4.response != "RedTriangle1")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.GreenTriangle4.response == "GreenStar2")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.GreenTriangle4.response == "RedTriangle1")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.GreenTriangle4.response == "BlueCircle4")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.GreenTriangle4.response != "RedTriangle1" && trial.GreenTriangle4.response != "GreenStar2" &&
						trial.GreenTriangle4.response != "BlueCircle4") 
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial YellowTriangle1>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.YellowTriangle1.response == "YellowCross3") ||
								(values.category == 2 && trial.YellowTriangle1.response == "RedTriangle1") ||
								(values.category == 3 && trial.YellowTriangle1.response == "RedTriangle1") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.YellowTriangle1.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.YellowTriangle1.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowTriangle1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowTriangle1.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowTriangle1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.YellowTriangle1.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowTriangle1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowTriangle1.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowTriangle1.response != "RedTriangle1")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.YellowTriangle1.response == "YellowCross3")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.YellowTriangle1.response == "RedTriangle1")  values.ResponseCategory = "FN" ]

/ ontrialend = [if (trial.YellowTriangle1.response != "RedTriangle1" && trial.YellowTriangle1.response != "YellowCross3")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***UNambiguous: 3*****
<trial YellowTriangle2>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.YellowTriangle2.response == "YellowCross3") ||
								(values.category == 2 && trial.YellowTriangle2.response == "RedTriangle1") ||
								(values.category == 3 && trial.YellowTriangle2.response == "GreenStar2") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.YellowTriangle2.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.YellowTriangle2.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowTriangle2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowTriangle2.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowTriangle2.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.YellowTriangle2.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowTriangle2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowTriangle2.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowTriangle2.response != "RedTriangle1")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.YellowTriangle2.response == "YellowCross3")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.YellowTriangle2.response == "RedTriangle1")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.YellowTriangle2.response == "GreenStar2")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.YellowTriangle2.response != "RedTriangle1" && trial.YellowTriangle2.response != "YellowCross3" &&
					trial.YellowTriangle2.response != "GreenStar2")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>



<trial YellowTriangle3>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.YellowTriangle3.response == "YellowCross3") ||
								(values.category == 2 && trial.YellowTriangle3.response == "RedTriangle1") ||
								(values.category == 3 && trial.YellowTriangle3.response == "YellowCross3") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.YellowTriangle3.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.YellowTriangle3.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowTriangle3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowTriangle3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowTriangle3.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.YellowTriangle3.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowTriangle3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowTriangle3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowTriangle3.response != "RedTriangle1")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.YellowTriangle3.response == "YellowCross3")  values.ResponseCategory = "CN" ]
/ ontrialend = [if (trial.YellowTriangle3.response == "RedTriangle1")  values.ResponseCategory = "F" ]

/ ontrialend = [if (trial.YellowTriangle3.response != "RedTriangle1" && trial.YellowTriangle3.response != "YellowCross3" )
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***unambiguous: 4*****
<trial YellowTriangle4>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.YellowTriangle4.response == "YellowCross3") ||
								(values.category == 2 && trial.YellowTriangle4.response == "RedTriangle1") ||
								(values.category == 3 && trial.YellowTriangle4.response == "BlueCircle4") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.YellowTriangle4.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.YellowTriangle4.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowTriangle4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowTriangle4.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowTriangle4.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.YellowTriangle4.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowTriangle4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowTriangle4.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowTriangle4.response != "RedTriangle1")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.YellowTriangle4.response == "YellowCross3")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.YellowTriangle4.response == "RedTriangle1")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.YellowTriangle4.response == "BlueCircle4")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.YellowTriangle4.response != "RedTriangle1" && trial.YellowTriangle4.response != "YellowCross3" &&
 trial.YellowTriangle4.response != "BlueCircle4" )
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>



<trial BlueTriangle1>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.BlueTriangle1.response == "BlueCircle4") ||
								(values.category == 2 && trial.BlueTriangle1.response == "RedTriangle1") ||
								(values.category == 3 && trial.BlueTriangle1.response == "RedTriangle1") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.BlueTriangle1.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.BlueTriangle1.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueTriangle1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueTriangle1.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueTriangle1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.BlueTriangle1.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueTriangle1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueTriangle1.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueTriangle1.response != "RedTriangle1")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.BlueTriangle1.response == "BlueCircle4")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.BlueTriangle1.response == "RedTriangle1")  values.ResponseCategory = "FN" ]

/ ontrialend = [if (trial.BlueTriangle1.response != "RedTriangle1" &&  trial.BlueTriangle1.response != "BlueCircle4" )
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>



***unambiguous: 5****
<trial BlueTriangle2>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.BlueTriangle2.response == "BlueCircle4") ||
								(values.category == 2 && trial.BlueTriangle2.response == "RedTriangle1") ||
								(values.category == 3 && trial.BlueTriangle2.response == "GreenStar2") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold && trial.BlueTriangle2.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.BlueTriangle2.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueTriangle2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueTriangle2.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueTriangle2.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.BlueTriangle2.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueTriangle2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueTriangle2.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueTriangle2.response != "RedTriangle1")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.BlueTriangle2.response == "BlueCircle4")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.BlueTriangle2.response == "RedTriangle1")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.BlueTriangle2.response == "GreenStar2")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.BlueTriangle2.response != "RedTriangle1" &&  trial.BlueTriangle2.response != "BlueCircle4" &&
trial.BlueTriangle2.response != "GreenStar2" )
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>



****Unambiguous: 6************
<trial BlueTriangle3>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.BlueTriangle3.response == "BlueCircle4") ||
								(values.category == 2 && trial.BlueTriangle3.response == "RedTriangle1") ||
								(values.category == 3 && trial.BlueTriangle3.response == "YellowCross3") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.BlueTriangle3.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.BlueTriangle3.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueTriangle3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueTriangle3.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueTriangle3.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.BlueTriangle3.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueTriangle3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueTriangle3.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueTriangle3.response != "RedTriangle1")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.BlueTriangle3.response == "BlueCircle4")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.BlueTriangle3.response == "RedTriangle1")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.BlueTriangle3.response == "YellowCross3")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.BlueTriangle3.response != "RedTriangle1" &&  trial.BlueTriangle3.response != "BlueCircle4" &&
trial.BlueTriangle3.response != "YellowCross3" )
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>



<trial BlueTriangle4>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.BlueTriangle4.response == "BlueCircle4") ||
								(values.category == 2 && trial.BlueTriangle4.response == "RedTriangle1") ||
								(values.category == 3 && trial.BlueTriangle4.response == "BlueCircle4") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.BlueTriangle4.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.BlueTriangle4.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueTriangle4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueTriangle4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueTriangle4.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.BlueTriangle4.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueTriangle4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueTriangle4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueTriangle4.response != "RedTriangle1")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.BlueTriangle4.response == "BlueCircle4")  values.ResponseCategory = "CN" ]
/ ontrialend = [if (trial.BlueTriangle4.response == "RedTriangle1")  values.ResponseCategory = "F" ]

/ ontrialend = [if (trial.BlueTriangle4.response != "RedTriangle1" &&  trial.BlueTriangle4.response != "BlueCircle4")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***********
STARS:
***********
<trial RedStar1>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.RedStar1.response == "RedTriangle1") ||
								(values.category == 2 && trial.RedStar1.response == "GreenStar2") ||
								(values.category == 3 && trial.RedStar1.response == "RedTriangle1") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold && trial.RedStar1.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.RedStar1.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedStar1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedStar1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedStar1.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.RedStar1.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedStar1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedStar1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedStar1.response != "GreenStar2")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.RedStar1.response == "GreenStar2")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.RedStar1.response == "RedTriangle1")  values.ResponseCategory = "CN" ]

/ ontrialend = [if (trial.RedStar1.response != "RedTriangle1" &&  trial.RedStar1.response != "GreenStar2")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial RedStar2>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.RedStar2.response == "RedTriangle1") ||
								(values.category == 2 && trial.RedStar2.response == "GreenStar2") ||
								(values.category == 3 && trial.RedStar2.response == "GreenStar2") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.RedStar2.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.RedStar2.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedStar2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedStar2.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedStar2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.RedStar2.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedStar2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedStar2.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedStar2.response != "GreenStar2")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.RedStar2.response == "GreenStar2")  values.ResponseCategory = "FN" ]
/ ontrialend = [if (trial.RedStar2.response == "RedTriangle1")  values.ResponseCategory = "C" ]

/ ontrialend = [if (trial.RedStar2.response != "RedTriangle1" &&  trial.RedStar2.response != "GreenStar2")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>



***Unambiguous: 7***
<trial RedStar3>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.RedStar3.response == "RedTriangle1") ||
								(values.category == 2 && trial.RedStar3.response == "GreenStar2") ||
								(values.category == 3 && trial.RedStar3.response == "YellowCross3") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold && trial.RedStar3.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.RedStar3.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedStar3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedStar3.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedStar3.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.RedStar3.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedStar3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedStar3.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedStar3.response != "GreenStar2")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.RedStar3.response == "GreenStar2")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.RedStar3.response == "RedTriangle1")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.RedStar3.response == "YellowCross3")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.RedStar3.response != "RedTriangle1" &&  trial.RedStar3.response != "GreenStar2" &&
trial.RedStar3.response != "YellowCross3")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>



***unambiguous: 8*****
<trial RedStar4>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.RedStar4.response == "RedTriangle1") ||
								(values.category == 2 && trial.RedStar4.response == "GreenStar2") ||
								(values.category == 3 && trial.RedStar4.response == "BlueCircle4") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.RedStar4.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.RedStar4.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedStar4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedStar4.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedStar4.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.RedStar4.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedStar4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedStar4.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedStar4.response != "GreenStar2")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.RedStar4.response == "GreenStar2")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.RedStar4.response == "RedTriangle1")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.RedStar4.response == "BlueCircle4")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.RedStar4.response != "RedTriangle1" &&  trial.RedStar4.response != "GreenStar2" &&
trial.RedStar4.response != "BlueCircle4")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial GreenStar1>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.GreenStar1.response == "GreenStar2") ||
								(values.category == 2 && trial.GreenStar1.response == "GreenStar2") ||
								(values.category == 3 && trial.GreenStar1.response == "RedTriangle1") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.GreenStar1.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.GreenStar1.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenStar1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenStar1.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenStar1.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.GreenStar1.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenStar1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenStar1.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenStar1.response != "GreenStar2")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.GreenStar1.response == "GreenStar2")  values.ResponseCategory = "CF" ]
/ ontrialend = [if (trial.GreenStar1.response == "RedTriangle1")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.GreenStar1.response != "RedTriangle1" &&  trial.GreenStar1.response != "GreenStar2")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial GreenStar2>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.GreenStar2.response == "GreenStar2") ||
								(values.category == 2 && trial.GreenStar2.response == "GreenStar2") ||
								(values.category == 3 && trial.GreenStar2.response == "GreenStar2") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.GreenStar2.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.GreenStar2.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenStar2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenStar2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenStar2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.GreenStar2.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenStar2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenStar2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenStar2.response != "GreenStar2")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.GreenStar2.response == "GreenStar2")  values.ResponseCategory = "CFN" ]

/ ontrialend = [if (trial.GreenStar2.response != "GreenStar2")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>



<trial GreenStar3>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.GreenStar3.response == "GreenStar2") ||
								(values.category == 2 && trial.GreenStar3.response == "GreenStar2") ||
								(values.category == 3 && trial.GreenStar3.response == "YellowCross3") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.GreenStar3.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.GreenStar3.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenStar3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenStar3.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenStar3.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.GreenStar3.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenStar3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenStar3.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenStar3.response != "GreenStar2")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.GreenStar3.response == "GreenStar2")  values.ResponseCategory = "CF" ]
/ ontrialend = [if (trial.GreenStar3.response == "YellowCross3")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.GreenStar3.response != "GreenStar2" && trial.GreenStar3.response != "YellowCross3")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial GreenStar4>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.GreenStar4.response == "GreenStar2") ||
								(values.category == 2 && trial.GreenStar4.response == "GreenStar2") ||
								(values.category == 3 && trial.GreenStar4.response == "BlueCircle4") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.GreenStar4.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.GreenStar4.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenStar4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenStar4.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenStar4.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.GreenStar4.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenStar4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenStar4.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenStar4.response != "GreenStar2")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.GreenStar4.response == "GreenStar2")  values.ResponseCategory = "CF" ]
/ ontrialend = [if (trial.GreenStar4.response == "BlueCircle4")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.GreenStar4.response != "GreenStar2" && trial.GreenStar4.response != "BlueCircle4")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***unambiguous: 9***
<trial YellowStar1>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.YellowStar1.response == "YellowCross3") ||
								(values.category == 2 && trial.YellowStar1.response == "GreenStar2") ||
								(values.category == 3 && trial.YellowStar1.response == "RedTriangle1") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold && trial.YellowStar1.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.YellowStar1.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowStar1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowStar1.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowStar1.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.YellowStar1.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowStar1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowStar1.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowStar1.response != "GreenStar2")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.YellowStar1.response == "GreenStar2")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.YellowStar1.response == "YellowCross3")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.YellowStar1.response == "RedTriangle1")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.YellowStar1.response != "GreenStar2" && trial.YellowStar1.response != "YellowCross3" &&
trial.YellowStar1.response != "RedTriangle1")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial YellowStar2>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.YellowStar2.response == "YellowCross3") ||
								(values.category == 2 && trial.YellowStar2.response == "GreenStar2") ||
								(values.category == 3 && trial.YellowStar2.response == "GreenStar2") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.YellowStar2.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.YellowStar2.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowStar2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowStar2.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowStar2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.YellowStar2.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowStar2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowStar2.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowStar2.response != "GreenStar2")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.YellowStar2.response == "GreenStar2")  values.ResponseCategory = "FN" ]
/ ontrialend = [if (trial.YellowStar2.response == "YellowCross3")  values.ResponseCategory = "C" ]

/ ontrialend = [if (trial.YellowStar2.response != "GreenStar2" && trial.YellowStar2.response != "YellowCross3")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial YellowStar3>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.YellowStar3.response == "YellowCross3") ||
								(values.category == 2 && trial.YellowStar3.response == "GreenStar2") ||
								(values.category == 3 && trial.YellowStar3.response == "YellowCross3") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.YellowStar3.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.YellowStar3.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowStar3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowStar3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowStar3.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.YellowStar3.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowStar3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowStar3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowStar3.response != "GreenStar2")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.YellowStar3.response == "GreenStar2")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.YellowStar3.response == "YellowCross3")  values.ResponseCategory = "CN" ]

/ ontrialend = [if (trial.YellowStar3.response != "GreenStar2" && trial.YellowStar3.response != "YellowCross3")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***unambiguous: 10****
<trial YellowStar4>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]
 
/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.YellowStar4.response == "YellowCross3") ||
								(values.category == 2 && trial.YellowStar4.response == "GreenStar2") ||
								(values.category == 3 && trial.YellowStar4.response == "BlueCircle4") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.YellowStar4.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.YellowStar4.correct)
 								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowStar4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowStar4.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowStar4.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.YellowStar4.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowStar4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowStar4.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowStar4.response != "GreenStar2")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.YellowStar4.response == "GreenStar2")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.YellowStar4.response == "YellowCross3")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.YellowStar4.response == "BlueCircle4")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.YellowStar4.response != "GreenStar2" && trial.YellowStar4.response != "YellowCross3" &&
trial.YellowStar4.response != "BlueCircle4" )
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


****unambiguous: 11*****
<trial BlueStar1>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.BlueStar1.response == "BlueCircle4") ||
								(values.category == 2 && trial.BlueStar1.response == "GreenStar2") ||
								(values.category == 3 && trial.BlueStar1.response == "RedTriangle1") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.BlueStar1.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.BlueStar1.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueStar1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueStar1.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueStar1.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.BlueStar1.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueStar1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueStar1.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueStar1.response != "GreenStar2")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.BlueStar1.response == "GreenStar2")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.BlueStar1.response == "BlueCircle4")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.BlueStar1.response == "RedTriangle1")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.BlueStar1.response != "GreenStar2" && trial.BlueStar1.response != "RedTriangle1" &&
trial.BlueStar1.response != "BlueCircle4" )
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial BlueStar2>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.BlueStar2.response == "BlueCircle4") ||
								(values.category == 2 && trial.BlueStar2.response == "GreenStar2") ||
								(values.category == 3 && trial.BlueStar2.response == "GreenStar2") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.BlueStar2.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.BlueStar2.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueStar2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueStar2.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueStar2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.BlueStar2.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueStar2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueStar2.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueStar2.response != "GreenStar2")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.BlueStar2.response == "GreenStar2")  values.ResponseCategory = "FN" ]
/ ontrialend = [if (trial.BlueStar2.response == "BlueCircle4")  values.ResponseCategory = "C" ]

/ ontrialend = [if (trial.BlueStar2.response != "GreenStar2" &&  trial.BlueStar2.response != "BlueCircle4" )
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


****unambiguous: 12
<trial BlueStar3>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.BlueStar3.response == "BlueCircle4") ||
								(values.category == 2 && trial.BlueStar3.response == "GreenStar2") ||
								(values.category == 3 && trial.BlueStar3.response == "YellowCross3") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.BlueStar3.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.BlueStar3.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueStar3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueStar3.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueStar3.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.BlueStar3.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueStar3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueStar3.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueStar3.response != "GreenStar2")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.BlueStar3.response == "GreenStar2")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.BlueStar3.response == "BlueCircle4")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.BlueStar3.response == "YellowCross3")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.BlueStar3.response != "GreenStar2" &&  trial.BlueStar3.response != "BlueCircle4" &&
trial.BlueStar3.response != "YellowCross3" )
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial BlueStar4>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.BlueStar4.response == "BlueCircle4") ||
								(values.category == 2 && trial.BlueStar4.response == "GreenStar2") ||
								(values.category == 3 && trial.BlueStar4.response == "BlueCircle4") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.BlueStar4.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.BlueStar4.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueStar4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueStar4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueStar4.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.BlueStar4.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueStar4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueStar4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueStar4.response != "GreenStar2")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.BlueStar4.response == "GreenStar2")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.BlueStar4.response == "BlueCircle4")  values.ResponseCategory = "CN" ]

/ ontrialend = [if (trial.BlueStar4.response != "GreenStar2" &&  trial.BlueStar4.response != "BlueCircle4" )
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


*****************
CROSSES
*****************
<trial RedCross1>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.RedCross1.response == "RedTriangle1") ||
								(values.category == 2 && trial.RedCross1.response == "YellowCross3") ||
								(values.category == 3 && trial.RedCross1.response == "RedTriangle1") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.RedCross1.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.RedCross1.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedCross1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedCross1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedCross1.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.RedCross1.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedCross1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedCross1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedCross1.response != "YellowCross3")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.RedCross1.response == "RedTriangle1")  values.ResponseCategory = "CN" ]
/ ontrialend = [if (trial.RedCross1.response == "YellowCross3")  values.ResponseCategory = "F" ]

/ ontrialend = [if (trial.RedCross1.response != "YellowCross3" &&  trial.RedCross1.response != "RedTriangle1" )
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***unambiguous: 13***
<trial RedCross2>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.RedCross2.response == "RedTriangle1") ||
								(values.category == 2 && trial.RedCross2.response == "YellowCross3") ||
								(values.category == 3 && trial.RedCross2.response == "GreenStar2") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.RedCross2.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.RedCross2.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedCross2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedCross2.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedCross2.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.RedCross2.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedCross2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedCross2.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedCross2.response != "YellowCross3")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.RedCross2.response == "RedTriangle1")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.RedCross2.response == "YellowCross3")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.RedCross2.response == "GreenStar2")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.RedCross2.response != "YellowCross3" &&  trial.RedCross2.response != "RedTriangle1" &&
trial.RedCross2.response != "GreenStar2")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial RedCross3>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.RedCross3.response == "RedTriangle1") ||
								(values.category == 2 && trial.RedCross3.response == "YellowCross3") ||
								(values.category == 3 && trial.RedCross3.response == "YellowCross3") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.RedCross3.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.RedCross3.correct)
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedCross3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedCross3.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedCross3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.RedCross3.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedCross3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedCross3.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedCross3.response != "YellowCross3")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.RedCross3.response == "RedTriangle1")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.RedCross3.response == "YellowCross3")  values.ResponseCategory = "FN" ]

/ ontrialend = [if (trial.RedCross3.response != "YellowCross3" &&  trial.RedCross3.response != "RedTriangle1")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***unambiguous: 14***
<trial RedCross4>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.RedCross4.response == "RedTriangle1") ||
								(values.category == 2 && trial.RedCross4.response == "YellowCross3") ||
								(values.category == 3 && trial.RedCross4.response == "BlueCircle4") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.RedCross4.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.RedCross4.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedCross4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedCross4.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedCross4.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.RedCross4.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedCross4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedCross4.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedCross4.response != "YellowCross3")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.RedCross4.response == "RedTriangle1")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.RedCross4.response == "YellowCross3")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.RedCross4.response == "BlueCircle4")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.RedCross4.response != "YellowCross3" &&  trial.RedCross4.response != "RedTriangle1" &&
trial.RedCross4.response != "BlueCircle4")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***unambiguous: 15***
<trial GreenCross1>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.GreenCross1.response == "GreenStar2") ||
								(values.category == 2 && trial.GreenCross1.response == "YellowCross3") ||
								(values.category == 3 && trial.GreenCross1.response == "RedTriangle1") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.GreenCross1.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.GreenCross1.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenCross1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenCross1.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenCross1.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.GreenCross1.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenCross1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenCross1.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenCross1.response != "YellowCross3")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.GreenCross1.response == "RedTriangle1")  values.ResponseCategory = "N" ]
/ ontrialend = [if (trial.GreenCross1.response == "YellowCross3")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.GreenCross1.response == "GreenStar2")  values.ResponseCategory = "C" ]

/ ontrialend = [if (trial.GreenCross1.response != "YellowCross3" &&  trial.GreenCross1.response != "RedTriangle1" &&
trial.GreenCross1.response != "GreenStar2")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial GreenCross2>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.GreenCross2.response == "GreenStar2") ||
								(values.category == 2 && trial.GreenCross2.response == "YellowCross3") ||
								(values.category == 3 && trial.GreenCross2.response == "GreenStar2") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.GreenCross2.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.GreenCross2.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenCross2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenCross2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenCross2.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.GreenCross2.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenCross2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenCross2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenCross2.response != "YellowCross3")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.GreenCross2.response == "YellowCross3")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.GreenCross2.response == "GreenStar2")  values.ResponseCategory = "CN" ]

/ ontrialend = [if (trial.GreenCross2.response != "YellowCross3" &&  trial.GreenCross2.response != "GreenStar2")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial GreenCross3>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.GreenCross3.response == "GreenStar2") ||
								(values.category == 2 && trial.GreenCross3.response == "YellowCross3") ||
								(values.category == 3 && trial.GreenCross3.response == "YellowCross3") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.GreenCross3.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.GreenCross3.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenCross3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenCross3.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenCross3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.GreenCross3.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenCross3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenCross3.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenCross3.response != "YellowCross3")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.GreenCross3.response == "YellowCross3")  values.ResponseCategory = "FN" ]
/ ontrialend = [if (trial.GreenCross3.response == "GreenStar2")  values.ResponseCategory = "C" ]

/ ontrialend = [if (trial.GreenCross3.response != "YellowCross3" &&  trial.GreenCross3.response != "GreenStar2")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***unambiguous: 16***
<trial GreenCross4>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.GreenCross4.response == "GreenStar2") ||
								(values.category == 2 && trial.GreenCross4.response == "YellowCross3") ||
								(values.category == 3 && trial.GreenCross4.response == "BlueCircle4") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.GreenCross4.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.GreenCross4.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenCross4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenCross4.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenCross4.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.GreenCross4.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenCross4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenCross4.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenCross4.response != "YellowCross3")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.GreenCross4.response == "YellowCross3")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.GreenCross4.response == "GreenStar2")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.GreenCross4.response == "BlueCircle4")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.GreenCross4.response != "YellowCross3" &&  trial.GreenCross4.response != "GreenStar2" && 
trial.GreenCross4.response != "BlueCircle4")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial YellowCross1>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.YellowCross1.response == "YellowCross3") ||
								(values.category == 2 && trial.YellowCross1.response == "YellowCross3") ||
								(values.category == 3 && trial.YellowCross1.response == "RedTriangle1") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.YellowCross1.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.YellowCross1.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowCross1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowCross1.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowCross1.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.YellowCross1.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowCross1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowCross1.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowCross1.response != "YellowCross3")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.YellowCross1.response == "YellowCross3")  values.ResponseCategory = "CF" ]
/ ontrialend = [if (trial.YellowCross1.response == "RedTriangle1")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.YellowCross1.response != "YellowCross3" &&  trial.YellowCross1.response != "RedTriangle1")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial YellowCross2>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.YellowCross2.response == "YellowCross3") ||
								(values.category == 2 && trial.YellowCross2.response == "YellowCross3") ||
								(values.category == 3 && trial.YellowCross2.response == "GreenStar2") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.YellowCross2.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.YellowCross2.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowCross2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowCross2.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowCross2.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.YellowCross2.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowCross2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowCross2.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowCross2.response != "YellowCross3")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.YellowCross2.response == "YellowCross3")  values.ResponseCategory = "CF" ]
/ ontrialend = [if (trial.YellowCross2.response == "GreenStar2")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.YellowCross2.response != "YellowCross3" &&  trial.YellowCross2.response != "GreenStar2")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial YellowCross3>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.YellowCross3.response == "YellowCross3") ||
								(values.category == 2 && trial.YellowCross3.response == "YellowCross3") ||
								(values.category == 3 && trial.YellowCross3.response == "YellowCross3") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.YellowCross3.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.YellowCross3.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowCross3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowCross3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowCross3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.YellowCross3.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowCross3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowCross3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowCross3.response != "YellowCross3")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.YellowCross3.response == "YellowCross3")  values.ResponseCategory = "CFN" ]

/ ontrialend = [if (trial.YellowCross3.response != "YellowCross3")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>



<trial YellowCross4>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.YellowCross4.response == "YellowCross3") ||
								(values.category == 2 && trial.YellowCross4.response == "YellowCross3") ||
								(values.category == 3 && trial.YellowCross4.response == "BlueCircle4") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.YellowCross4.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.YellowCross4.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowCross4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowCross4.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowCross4.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.YellowCross4.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowCross4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowCross4.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowCross4.response != "YellowCross3")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.YellowCross4.response == "YellowCross3")  values.ResponseCategory = "CF" ]
/ ontrialend = [if (trial.YellowCross4.response == "BlueCircle4")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.YellowCross4.response != "YellowCross3" && trial.YellowCross4.response != "BlueCircle4")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***unambiguous: 17***
<trial BlueCross1>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.BlueCross1.response == "BlueCircle4") ||
								(values.category == 2 && trial.BlueCross1.response == "YellowCross3") ||
								(values.category == 3 && trial.BlueCross1.response == "RedTriangle1") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.BlueCross1.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.BlueCross1.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueCross1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueCross1.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueCross1.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.BlueCross1.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueCross1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueCross1.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueCross1.response != "YellowCross3")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.BlueCross1.response == "YellowCross3")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.BlueCross1.response == "BlueCircle4")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.BlueCross1.response == "RedTriangle1")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.BlueCross1.response != "YellowCross3" && trial.BlueCross1.response != "BlueCircle4" &&
trial.BlueCross1.response != "RedTriangle1")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***unambiguous: 18***
<trial BlueCross2>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.BlueCross2.response == "BlueCircle4") ||
								(values.category == 2 && trial.BlueCross2.response == "YellowCross3") ||
								(values.category == 3 && trial.BlueCross2.response == "GreenStar2") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold && trial.BlueCross2.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.BlueCross2.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueCross2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueCross2.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueCross2.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.BlueCross2.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueCross2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueCross2.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueCross2.response != "YellowCross3")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.BlueCross2.response == "YellowCross3")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.BlueCross2.response == "BlueCircle4")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.BlueCross2.response == "GreenStar2")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.BlueCross2.response != "YellowCross3" && trial.BlueCross2.response != "BlueCircle4" &&
trial.BlueCross2.response != "GreenStar2")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial BlueCross3>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.BlueCross3.response == "BlueCircle4") ||
								(values.category == 2 && trial.BlueCross3.response == "YellowCross3") ||
								(values.category == 3 && trial.BlueCross3.response == "YellowCross3") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.BlueCross3.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.BlueCross3.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueCross3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueCross3.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueCross3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.BlueCross3.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueCross3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueCross3.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueCross3.response != "YellowCross3")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.BlueCross3.response == "YellowCross3")  values.ResponseCategory = "FN" ]
/ ontrialend = [if (trial.BlueCross3.response == "BlueCircle4")  values.ResponseCategory = "C" ]

/ ontrialend = [if (trial.BlueCross3.response != "YellowCross3" && trial.BlueCross3.response != "BlueCircle4")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial BlueCross4>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.BlueCross4.response == "BlueCircle4") ||
								(values.category == 2 && trial.BlueCross4.response == "YellowCross3") ||
								(values.category == 3 && trial.BlueCross4.response == "BlueCircle4") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.BlueCross4.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.BlueCross4.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueCross4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueCross4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueCross4.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.BlueCross4.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueCross4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueCross4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueCross4.response != "YellowCross3")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.BlueCross4.response == "YellowCross3")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.BlueCross4.response == "BlueCircle4")  values.ResponseCategory = "CN" ]

/ ontrialend = [if (trial.BlueCross4.response != "YellowCross3" && trial.BlueCross4.response != "BlueCircle4")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


*******************
CIRCLES
*******************
<trial RedCircle1>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.RedCircle1.response == "RedTriangle1") ||
								(values.category == 2 && trial.RedCircle1.response == "BlueCircle4") ||
								(values.category == 3 && trial.RedCircle1.response == "RedTriangle1") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.RedCircle1.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.RedCircle1.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedCircle1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedCircle1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedCircle1.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.RedCircle1.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedCircle1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedCircle1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedCircle1.response != "BlueCircle4")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.RedCircle1.response == "BlueCircle4")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.RedCircle1.response == "RedTriangle1")  values.ResponseCategory = "CN" ]

/ ontrialend = [if (trial.RedCircle1.response != "BlueCircle4" && trial.RedCircle1.response != "RedTriangle1")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***unambiguous: 19***
<trial RedCircle2>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.RedCircle2.response == "RedTriangle1") ||
								(values.category == 2 && trial.RedCircle2.response == "BlueCircle4") ||
								(values.category == 3 && trial.RedCircle2.response == "GreenStar2") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.RedCircle2.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.RedCircle2.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedCircle2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedCircle2.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedCircle2.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.RedCircle2.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedCircle2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedCircle2.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedCircle2.response != "BlueCircle4")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.RedCircle2.response == "BlueCircle4")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.RedCircle2.response == "RedTriangle1")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.RedCircle2.response == "GreenStar2")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.RedCircle2.response != "BlueCircle4" && trial.RedCircle2.response != "RedTriangle1" && 
trial.RedCircle2.response != "GreenStar2")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***unambiguous: 20***
<trial RedCircle3>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.RedCircle3.response == "RedTriangle1") ||
								(values.category == 2 && trial.RedCircle3.response == "BlueCircle4") ||
								(values.category == 3 && trial.RedCircle3.response == "YellowCross3") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.RedCircle3.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.RedCircle3.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedCircle3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedCircle3.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedCircle3.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.RedCircle3.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedCircle3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedCircle3.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedCircle3.response != "BlueCircle4")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.RedCircle3.response == "BlueCircle4")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.RedCircle3.response == "RedTriangle1")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.RedCircle3.response == "YellowCross3")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.RedCircle3.response != "BlueCircle4" && trial.RedCircle3.response != "RedTriangle1" && 
trial.RedCircle3.response != "YellowCross3")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>



<trial RedCircle4>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.RedCircle4.response == "RedTriangle1") ||
								(values.category == 2 && trial.RedCircle4.response == "BlueCircle4") ||
								(values.category == 3 && trial.RedCircle4.response == "BlueCircle4") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.RedCircle4.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.RedCircle4.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedCircle4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedCircle4.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedCircle4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.RedCircle4.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.RedCircle4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.RedCircle4.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.RedCircle4.response != "BlueCircle4")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.RedCircle4.response == "BlueCircle4")  values.ResponseCategory = "FN" ]
/ ontrialend = [if (trial.RedCircle4.response == "RedTriangle1")  values.ResponseCategory = "C" ]

/ ontrialend = [if (trial.RedCircle4.response != "BlueCircle4" && trial.RedCircle4.response != "RedTriangle1")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***unambiguous: 21***
<trial GreenCircle1>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.GreenCircle1.response == "GreenStar2") ||
								(values.category == 2 && trial.GreenCircle1.response == "BlueCircle4") ||
								(values.category == 3 && trial.GreenCircle1.response == "RedTriangle1") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.GreenCircle1.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.GreenCircle1.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenCircle1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenCircle1.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenCircle1.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.GreenCircle1.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenCircle1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenCircle1.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenCircle1.response != "BlueCircle4")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.GreenCircle1.response == "BlueCircle4")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.GreenCircle1.response == "GreenStar2")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.GreenCircle1.response == "RedTriangle1")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.GreenCircle1.response != "BlueCircle4" && trial.GreenCircle1.response != "GreenStar2" &&
trial.GreenCircle1.response != "RedTriangle1")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial GreenCircle2>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.GreenCircle2.response == "GreenStar2") ||
								(values.category == 2 && trial.GreenCircle2.response == "BlueCircle4") ||
								(values.category == 3 && trial.GreenCircle2.response == "GreenStar2") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.GreenCircle2.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.GreenCircle2.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenCircle2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenCircle2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenCircle2.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.GreenCircle2.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenCircle2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenCircle2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenCircle2.response != "BlueCircle4")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.GreenCircle2.response == "BlueCircle4")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.GreenCircle2.response == "GreenStar2")  values.ResponseCategory = "CN" ]

/ ontrialend = [if (trial.GreenCircle2.response != "BlueCircle4" && trial.GreenCircle2.response != "GreenStar2")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***unambiguous: 22****
<trial GreenCircle3>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.GreenCircle3.response == "GreenStar2") ||
								(values.category == 2 && trial.GreenCircle3.response == "BlueCircle4") ||
								(values.category == 3 && trial.GreenCircle3.response == "YellowCross3") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.GreenCircle3.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.GreenCircle3.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenCircle3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenCircle3.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenCircle3.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.GreenCircle3.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenCircle3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenCircle3.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenCircle3.response != "BlueCircle4")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.GreenCircle3.response == "BlueCircle4")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.GreenCircle3.response == "GreenStar2")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.GreenCircle3.response == "YellowCross3")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.GreenCircle3.response != "BlueCircle4" && trial.GreenCircle3.response != "GreenStar2" &&
trial.GreenCircle3.response != "YellowCross3")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial GreenCircle4>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.GreenCircle4.response == "GreenStar2") ||
								(values.category == 2 && trial.GreenCircle4.response == "BlueCircle4") ||
								(values.category == 3 && trial.GreenCircle4.response == "BlueCircle4") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold && trial.GreenCircle4.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.GreenCircle4.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenCircle4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenCircle4.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenCircle4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.GreenCircle4.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.GreenCircle4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.GreenCircle4.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.GreenCircle4.response != "BlueCircle4")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.GreenCircle4.response == "BlueCircle4")  values.ResponseCategory = "FN" ]
/ ontrialend = [if (trial.GreenCircle4.response == "GreenStar2")  values.ResponseCategory = "C" ]

/ ontrialend = [if (trial.GreenCircle4.response != "BlueCircle4" && trial.GreenCircle4.response != "GreenStar2")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***unambiguous: 23***
<trial YellowCircle1>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.YellowCircle1.response == "YellowCross3") ||
								(values.category == 2 && trial.YellowCircle1.response == "BlueCircle4") ||
								(values.category == 3 && trial.YellowCircle1.response == "RedTriangle1") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.YellowCircle1.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.YellowCircle1.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowCircle1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowCircle1.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowCircle1.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.YellowCircle1.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowCircle1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowCircle1.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowCircle1.response != "BlueCircle4")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.YellowCircle1.response == "BlueCircle4")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.YellowCircle1.response == "YellowCross3")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.YellowCircle1.response == "RedTriangle1")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.YellowCircle1.response != "BlueCircle4" && trial.YellowCircle1.response != "YellowCross3" &&
trial.YellowCircle1.response != "RedTriangle1" )
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


***unambiguous: 24***
<trial YellowCircle2>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.YellowCircle2.response == "YellowCross3") ||
								(values.category == 2 && trial.YellowCircle2.response == "BlueCircle4") ||
								(values.category == 3 && trial.YellowCircle2.response == "GreenStar2") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.YellowCircle2.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.YellowCircle2.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowCircle2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowCircle2.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowCircle2.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.YellowCircle2.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowCircle2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowCircle2.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowCircle2.response != "BlueCircle4")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.YellowCircle2.response == "BlueCircle4")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.YellowCircle2.response == "YellowCross3")  values.ResponseCategory = "C" ]
/ ontrialend = [if (trial.YellowCircle2.response == "GreenStar2")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.YellowCircle2.response != "BlueCircle4" && trial.YellowCircle2.response != "YellowCross3" &&
trial.YellowCircle2.response != "GreenStar2" )
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial YellowCircle3>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.YellowCircle3.response == "YellowCross3") ||
								(values.category == 2 && trial.YellowCircle3.response == "BlueCircle4") ||
								(values.category == 3 && trial.YellowCircle3.response == "YellowCross3") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.YellowCircle3.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.YellowCircle3.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowCircle3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowCircle3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowCircle3.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.YellowCircle3.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowCircle3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowCircle3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowCircle3.response != "BlueCircle4")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.YellowCircle3.response == "BlueCircle4")  values.ResponseCategory = "F" ]
/ ontrialend = [if (trial.YellowCircle3.response == "YellowCross3")  values.ResponseCategory = "CN" ]

/ ontrialend = [if (trial.YellowCircle3.response != "BlueCircle4" && trial.YellowCircle3.response != "YellowCross3")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial YellowCircle4>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.YellowCircle4.response == "YellowCross3") ||
								(values.category == 2 && trial.YellowCircle4.response == "BlueCircle4") ||
								(values.category == 3 && trial.YellowCircle4.response == "BlueCircle4") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.YellowCircle4.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.YellowCircle4.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowCircle4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowCircle4.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowCircle4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.YellowCircle4.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.YellowCircle4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.YellowCircle4.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.YellowCircle4.response != "BlueCircle4")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.YellowCircle4.response == "BlueCircle4")  values.ResponseCategory = "FN" ]
/ ontrialend = [if (trial.YellowCircle4.response == "YellowCross3")  values.ResponseCategory = "C" ]

/ ontrialend = [if (trial.YellowCircle4.response != "BlueCircle4" && trial.YellowCircle4.response != "YellowCross3")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial BlueCircle1>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.BlueCircle1.response == "BlueCircle4") ||
								(values.category == 2 && trial.BlueCircle1.response == "BlueCircle4") ||
								(values.category == 3 && trial.BlueCircle1.response == "RedTriangle1") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold && trial.BlueCircle1.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.BlueCircle1.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueCircle1.response == "RedTriangle1")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueCircle1.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueCircle1.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.BlueCircle1.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueCircle1.response != "RedTriangle1")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueCircle1.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueCircle1.response != "BlueCircle4")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.BlueCircle1.response == "BlueCircle4")  values.ResponseCategory = "CF" ]
/ ontrialend = [if (trial.BlueCircle1.response == "RedTriangle1")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.BlueCircle1.response != "BlueCircle4" && trial.BlueCircle1.response != "RedTriangle1")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial BlueCircle2>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.BlueCircle2.response == "BlueCircle4") ||
								(values.category == 2 && trial.BlueCircle2.response == "BlueCircle4") ||
								(values.category == 3 && trial.BlueCircle2.response == "GreenStar2") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.BlueCircle2.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.BlueCircle2.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueCircle2.response == "GreenStar2")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueCircle2.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueCircle2.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.BlueCircle2.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueCircle2.response != "GreenStar2")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueCircle2.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueCircle2.response != "BlueCircle4")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.BlueCircle2.response == "BlueCircle4")  values.ResponseCategory = "CF" ]
/ ontrialend = [if (trial.BlueCircle2.response == "GreenStar2")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.BlueCircle2.response != "BlueCircle4" && trial.BlueCircle2.response != "GreenStar2")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>


<trial BlueCircle3>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.BlueCircle3.response == "BlueCircle4") ||
								(values.category == 2 && trial.BlueCircle3.response == "BlueCircle4") ||
								(values.category == 3 && trial.BlueCircle3.response == "YellowCross3") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.BlueCircle3.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.BlueCircle3.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueCircle3.response == "YellowCross3")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueCircle3.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueCircle3.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.BlueCircle3.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueCircle3.response != "YellowCross3")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueCircle3.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueCircle3.response != "BlueCircle4")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.BlueCircle3.response == "BlueCircle4")  values.ResponseCategory = "CF" ]
/ ontrialend = [if (trial.BlueCircle3.response == "YellowCross3")  values.ResponseCategory = "N" ]

/ ontrialend = [if (trial.BlueCircle3.response != "BlueCircle4" && trial.BlueCircle3.response != "YellowCross3")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>



<trial BlueCircle4>
/ inputdevice = mouse
/ correctmessage = true(right,400)
/ errormessage = true(wrong,400)

/ ontrialbegin = [if (values.category == 1) values.colortrialcount += 1]
/ ontrialbegin = [if (values.category == 2) values.formtrialcount += 1]
/ ontrialbegin = [if (values.category == 3) values.numbertrialcount += 1]

/ stimulusframes = [1=playcard, RedTriangle1, GreenStar2, YellowCross3, BlueCircle4, deck]
/ validresponse = (RedTriangle1, GreenStar2, YellowCross3, BlueCircle4)
/ iscorrectresponse = [(values.category == 1 && trial.BlueCircle4.response == "BlueCircle4") ||
								(values.category == 2 && trial.BlueCircle4.response == "BlueCircle4") ||
								(values.category == 3 && trial.BlueCircle4.response == "BlueCircle4") ]

/ ontrialend = [if (values.correctstreak >= parameters.setmaintainthreshold  && trial.BlueCircle4.error) 
						values.Sum_FailureMaintainSet += 1]
/ ontrialend = [if (trial.BlueCircle4.correct) 
								{ values.correctstreak += 1;
								values.totalcorrect += 1}
						else 
								{values.correctstreak = 0; 
								values.errorsum_block += 1;
								values.totalerror += 1 }]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueCircle4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueCircle4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueCircle4.response == "BlueCircle4")
						{values.PerseverativeResponse = 1; 
						values.Sum_PerseverativeResponses += 1}]

/ontrialend = [if (trial.BlueCircle4.error && values.perseverativeresponse == 1) values.sum_perseverativeerror += 1]

/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 1 && trial.BlueCircle4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 2 && trial.BlueCircle4.response != "BlueCircle4")
							values.OldRuleWindow = 0]
/ ontrialend = [if (values.OldRuleWindow == 1 && values.category == 3 && trial.BlueCircle4.response != "BlueCircle4")
							values.OldRuleWindow = 0]

/ ontrialend = [if (trial.BlueCircle4.response == "BlueCircle4")  values.ResponseCategory = "CFN" ]

/ ontrialend = [if (trial.BlueCircle4.response != "BlueCircle4")
						 values.ResponseCategory = "O" ]

/ branch = [trial.selectcard]
</trial>

<trial end>
/ timeout = 0
/ recorddata = true
</trial>
**************************************************************************************************************
**************************************************************************************************************
	BLOCKS
**************************************************************************************************************
**************************************************************************************************************

<block color>
/ onblockbegin = [values.correctstreak = 0; values.errorsum_block = 0]
/ onblockbegin = [values.PerseverativeResponse = 0]
/ onblockbegin = [values.colorblockcount +=  1]
/ onblockbegin = [values.category = 1]
/ trials = [1 = selectcard]
/ skip = [values.colorblockcount >= parameters.cstotalblocks]
/ stop = [expressions.toomanytrials]
/ stop = [values.correctstreak > 0 && mod(values.correctstreak, parameters.correctstreakthreshold)==0]
/ onblockend = [if (values.colorblockcount == 1) values.trialscompletefirstcategory = values.colortrialcount]
/ onblockend = [if (values.correctstreak == parameters.correctstreakthreshold ) 
				values.completedcategories += 1]
/ onblockend = [if (values.colorblockcount == 1)  values.percenterror_C1 = 100 * (values.errorsum_block/trial.selectcard.count)
						else values.percenterror_C2 = 100*(values.errorsum_block/trial.selectcard.count)]
/ branch = [if (values.colorblockcount > parameters.cstotalblocks) block.end]
/ branch = [if (expressions.toomanytrials) block.end]
/ branch = [if (values.correctstreak > 0 && mod(values.correctstreak, parameters.correctstreakthreshold)==0) 
							{values.OldRuleWindow = 1;  block.form}]
</block>


<block form>
/ onblockbegin = [values.correctstreak = 0; values.errorsum_block = 0]
/ onblockbegin = [values.PerseverativeResponse = 0]
/ onblockbegin = [values.formblockcount += 1]
/ onblockbegin = [values.category = 2]
/ trials = [1 = selectcard]
/ skip = [values.formblockcount >= parameters.cstotalblocks]
/ stop = [expressions.toomanytrials]
/ stop = [values.correctstreak > 0 && mod(values.correctstreak, parameters.correctstreakthreshold)==0]
/ onblockend = [if (values.correctstreak == parameters.correctstreakthreshold ) 
				values.completedcategories += 1]
/ onblockend = [if (values.formblockcount == 1)  values.percenterror_F1 = 100 * (values.errorsum_block/trial.selectcard.count)
						else values.percenterror_F2 = 100*(values.errorsum_block/trial.selectcard.count)]
/ branch = [if (values.formblockcount > parameters.cstotalblocks) block.end]
/ branch = [if (expressions.toomanytrials) block.end]
/ branch = [if (values.correctstreak > 0 && mod(values.correctstreak, parameters.correctstreakthreshold)==0) 
							{values.OldRuleWindow = 1; block.number}]
</block>


<block number>
/ onblockbegin = [values.correctstreak = 0; values.errorsum_block = 0]
/ onblockbegin = [values.PerseverativeResponse= 0]
/ onblockbegin = [values.numberblockcount += 1]
/ onblockbegin = [values.category = 3]
/ trials = [1 = selectcard]
/ skip = [values.numberblockcount >= parameters.cstotalblocks]
/ stop = [expressions.toomanytrials]
/ stop = [values.correctstreak > 0 && mod(values.correctstreak, parameters.correctstreakthreshold)==0]
/ onblockend = [if (values.correctstreak == parameters.correctstreakthreshold ) 
				values.completedcategories += 1]
/ onblockend = [if (values.numberblockcount == 1)  values.percenterror_N1 = 100 * (values.errorsum_block/trial.selectcard.count)
						else values.percenterror_N2 = 100*(values.errorsum_block/trial.selectcard.count)]
/ branch = [if (values.numberblockcount > parameters.cstotalblocks) block.end]
/ branch = [if (expressions.toomanytrials) block.end]
/ branch = [if (values.correctstreak > 0 && mod(values.correctstreak, parameters.correctstreakthreshold) ==0) 
							{values.OldRuleWindow = 1; block.color}]
</block>


Note: Utility block to run one trial to record all final data points
<block end>
/ trials = [1 = end]
/ errormessage = false
/ recorddata = true
</block>

**************************************************************************************************************
**************************************************************************************************************
	EXPERIMENT 
**************************************************************************************************************
**************************************************************************************************************

<expt>
/ onexptbegin = [if (!parameters.showdeckinfo) text.deck.textcolor = white]
/ blocks = [1 = color; 2 = end]
/ preinstructions = (welcome, page1)
/ postinstructions = (end)
/onexptend = [values.completed = 1]
</expt>

****************************************************End of Script************************************************************